!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("redux-saga/effects")):"function"==typeof define&&define.amd?define(["redux-saga/effects"],n):t["roadhog-saga"]=n(t.reduxSaga_effects)}(this,function(t){"use strict";var n=function(t){if(!/.*_.*/.test(t))throw new Error("Wrong format for action: '"+t+"'. should be '<METHOD_NAME>_<RESOURCE_NAME>' (ie: GET_USERS)")},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])}return t},u=function(){function t(t,n){var r=[],e=!0,u=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(e=(i=a.next()).done)&&(r.push(i.value),!n||r.length!==n);e=!0);}catch(t){u=!0,o=t}finally{try{!e&&a.return&&a.return()}finally{if(u)throw o}}return r}return function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(t){if(Array.isArray(t)){for(var n=0,r=Array(t.length);n<t.length;n++)r[n]=t[n];return r}return Array.from(t)},i=function(t){return t.config},a=function(t){return i(t).api},c=function(t){return i(t).mocks},s=function(t){return function(n){return a(n)[t]}},f=function(t){return function(n){return function(r){return s(t)(r)[n]}}},p=function(t){return function(n){return function(r){var u=a(r),o=s(t)(r),i=f(t)(n)(r),c={method:n};return u.options&&(c=e({},c,u.options)),o.options&&(c=e({},c,o.options)),i&&i.options&&(c=e({},c,i.options)),c}}},d=function(t){return function(n){return function(r){var e=s(t)(r),u=f(t)(n)(r);return void 0===u?e:"string"==typeof u?u:u.url}}},y=function(t){return function(n){return function(r){var e=c(r);if(e)return([].concat(o(e.filter(function(t){return t.method===n})),o(e.filter(function(t){return void 0===t.method})),o(e.filter(function(t){return t.method!==n&&void 0!==t.method}))).find(function(n){return n.match.test(t)})||{}).fallback}}},h=function(t){return Array.isArray(t)?t.map(function(t){return encodeURIComponent(t)}):encodeURIComponent(t)},l=function(t){return!t||"object"===(void 0===t?"undefined":r(t))&&0===Object.keys(t).length||Array.isArray(t)&&0===t.length},m=function(t){return function(n){return l(n)?t:t+(t.endsWith("/")?"":"/")+h(n).join("/")}},b=function(t){return function(n){if(l(n))return t;var r=Object.keys(n).map(function(t){return t+"="+h(n[t])}),e=t.endsWith("/")||t.endsWith("&")||t.endsWith("?")?"":"/",u=t.endsWith("&")||t.endsWith("?")?"":"?";return""+t+e+u+r.join("&")}},x=function(n){return regeneratorRuntime.mark(function r(){var o,i,a,c,s,f,y,h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=n.split(/_(.+)/),i=u(o,2),a=i[0],c=i[1],r.next=3,t.select(p(c)(a));case 3:return s=r.sent,f=h.body,s="string"==typeof f?e({},s,{body:f}):e({},s,{body:JSON.stringify(f)}),r.next=8,t.select(d(c)(a));case 8:return y=r.sent,y=m(y)(h.path),y=b(y)(h.query),r.abrupt("return",[y,s]);case 12:case"end":return r.stop()}},r,this)})},v=function(t){return regeneratorRuntime.mark(function n(r){var e;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r.ok||!t){n.next=2;break}return n.abrupt("return",t);case 2:if(204!=+r.status){n.next=4;break}return n.abrupt("return",void 0);case 4:if(!(e=r.headers&&r.headers.get("Content-Type"))||!e.includes("json")){n.next=17;break}return n.prev=6,n.next=9,r.json();case 9:return n.abrupt("return",n.sent);case 12:return n.prev=12,n.t0=n.catch(6),n.next=16,r.text();case 16:return n.abrupt("return",n.sent);case 17:return n.next=19,r.text();case 19:return n.abrupt("return",n.sent);case 20:case"end":return n.stop()}},n,this,[[6,12]])})},g=function(t,n,r){return{type:"API_"+t+"_"+n,payload:r}};return function(r){return regeneratorRuntime.mark(function e(o){var i,a,c,s,f,p,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n(r),e.next=3,x(r)(o);case 3:return i=e.sent,a=u(i,2),c=a[0],s=a[1],e.next=9,t.select(y(c)(s.method));case 9:return f=e.sent,e.next=12,t.put(g(r,"STARTED"));case 12:return e.next=14,fetch(c,s);case 14:return p=e.sent,e.next=17,v(f)(p);case 17:if(d=e.sent,p.ok||f){e.next=21;break}return e.next=21,t.put(g(r,"ERROR",{raw:p,data:d,status:p.status,statusText:p.statusText}));case 21:return e.next=23,t.put(g(r,"END",{raw:p,data:d}));case 23:return e.abrupt("return",d);case 24:case"end":return e.stop()}},e,this)})}});
//# sourceMappingURL=index.js.map
